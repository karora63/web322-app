<!-- shop.hbs -->
<div class="container">
  <div class="row">
    <section class="main col-md-9">
      <!-- Check if a post exists to show -->
      {{#if data.post}}
        <article class="product-item">
          <div class="row">
            <div class="col-4">
              <!-- Display the current post title -->
              <h2>{{data.post.title}}</h2>
              <!-- Display the feature image for the post -->
              <img src="{{data.post.featureImage}}" alt="feature image" style="width:100%" />
            </div>

            <div class="col-8">
              <br /><br />
              <div class="row">
                <div class="col-12">
                  <!-- Display the body content using safeHTML helper -->
                  <div>{{{safeHTML data.post.body}}}</div>
                  <br /><br />
                  <strong>Price:</strong> ${{data.post.price}}<br />
                  <strong>Category:</strong> {{data.post.category}}<br />
                  <strong>Last Updated:</strong> {{data.post.postDate}}
                </div>
              </div>
            </div>
          </div>
        </article>
      {{else}}
        <!-- Show message if no post to display -->
        <div class="col-md-12 text-center">
          <h2>{{data.message}}</h2>
          <p>Please try another Post / Category</p>
        </div>
      {{/if}}
    </section>

    <aside class="col-md-3">
      <!-- Items list, only shown if items exist -->
      {{#if data.posts}}
        <br /><br />
        <h4>Items</h4>
        <ul class="list-group">
          {{#each data.posts}}
            <a href="/shop/{{this.id}}?category={{../viewingCategory}}" class="list-group-item">{{this.title}}</a>
          {{/each}}
        </ul>
      {{/if}}

      <!-- Categories list, only shown if categories exist -->
      {{#if data.categories}}
        <h4>Categories</h4>
        <ul class="list-group">
          {{#each data.categories}}
            <a href="/shop?category={{this.id}}" class="list-group-item">{{this.name}}</a>
          {{/each}}
        </ul>
      {{/if}}
    </aside>
  </div>
</div>
